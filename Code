#include<stdio.h>
#include<string.h>
  struct student
    {
     char name[50];
     int roll;
     float cgpa;
     float twelve;
     float tenth;
     };
     struct student temp;
void first(struct student s[],int n1);
void second(struct student s[],int n2);
void third(struct student s[],int n3);
void output(struct student s[],int n);
 int main()
 {int num,i,j;
     printf("Enter no.of students to compare. ");
     scanf("%d",&num);
     printf("\n");
     struct student s[100];
     for(i=0;i<num;i++)
     {
      printf("Enter details for %d student: \n",i+1);
      printf("Enter name : ");
      scanf("%s",&s[i].name);
      roll:
      printf("Enter roll.no. ");
      scanf("%d",&s[i].roll);
      if(s[i].roll<=0)
      {
          printf("Invalid Input , enter again.\n");
          goto roll;
      }
      cgpa:
      printf("Enter CGPA : ");
      scanf("%f",&s[i].cgpa);
      if(s[i].cgpa<=0 || s[i].cgpa>10)
      {
          printf("Invalid Input , enter again.\n");
          goto cgpa;
      }
      twelve:
      printf("Enter 12th marks : ");
      scanf("%f",&s[i].twelve);
      if(s[i].twelve<0 || s[i].twelve>100)
      {
          printf("Invalid Input , enter again.\n");
          goto twelve;
      }
      tenth:
      printf("Enter 10th marks : ");
      scanf("%f",&s[i].tenth);
      if(s[i].tenth<0 || s[i].tenth>100)
      {
          printf("Invalid Input , enter again.\n");
          goto tenth;
      }
      printf("\n");
     }
     first(s,num);
     return 0;
     }  
 void first(struct student s[],int n1)
     {
     int i,j;
     for(i=0;i<n1-1;i++)
     {
     for(j=0;j<n1-i-1;j++)
     {
     if (s[j].cgpa<s[j+1].cgpa)
     {
      temp=s[j];
      s[j]=s[j+1];
      s[j+1]=temp;
     }
     }
     }
        second(s,n1);
     }
     
     
     
     void second(struct student s[],int n2)
     {
     int i,j;
     for(i=0;i<n2-1;i++)
     {
     for(j=0;j<n2-i-1;j++)
     {
     if (s[j].cgpa==s[j+1].cgpa && s[j].twelve<s[j+1].twelve)
     {
      temp=s[j];
      s[j]=s[j+1];
      s[j+1]=temp;
     }
     }
     }
      third(s,n2);
     }
     
    void third(struct student s[],int n3)
     {
     int i,j;
     for(i=0;i<n3-1;i++)
     {
     for(j=0;j<n3-i-1;j++)
     {
     if (s[j].cgpa==s[j+1].cgpa && s[j].twelve==s[j+1].twelve && s[j].tenth<s[j+1].tenth)
     {
      temp=s[j];
      s[j]=s[j+1];
      s[j+1]=temp;
     }
     }
     }
      output(s,n3);
     }
     
     void output(struct student s[],int N)
     {
      int j;
      printf("\n");
      printf("Students sorted in descending order of CGPA then 12th marks then 10th marks  : \n");
      for(j=0;j<N;j++)
     {
      printf("\nRank: %d\n Name : %s \n Roll.no. %d \n CGPA: %.2f \n 12th: %.2f \n 10th: %.2f\n",j+1,s[j].name,s[j].roll,s[j].cgpa,s[j].twelve,s[j].tenth);
     }
     }
    
